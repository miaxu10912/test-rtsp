<div class="main-wrap">
  <!-- 透明的视频容器，native view会显示在这里 -->
  <div class="camera-wrap" id="rtsp-wrap">
    
    <!-- 🎯 视频状态指示器 -->
    <div class="video-status-indicator">
      <div>📺 RTSP视频区域</div>
      <div class="status-subtitle">Native View 渲染</div>
    </div>
    
    <!-- 🎮 悬浮控制按钮区域 -->
    <div class="overlay-controls">
      <!-- 主要控制按钮 -->
      <div class="control-row main-controls">
        <button class="control-btn start-btn" (click)="startPull()">
          ▶️ 开始拉流
        </button>
        <button class="control-btn stop-btn" (click)="stopPull()">
          ⏹️ 停止拉流
        </button>
      </div>
      
      <!-- 录制控制按钮 -->
      <div class="control-row record-controls">
        <button class="control-btn photo-btn" (click)="takeSnapshot()">
          📷 拍照
        </button>
        <button 
          class="control-btn record-btn" 
          (click)="startSaveMp4()"
          *ngIf="!isStartRecordVideo">
          🎬 开始录制
        </button>
        <button 
          class="control-btn stop-record-btn" 
          (click)="stopRecordMp4()"
          *ngIf="isStartRecordVideo">
          ⏹️ 停止录制
        </button>
      </div>

      <!-- 自动测试控制按钮 -->
      <div class="control-row test-controls">
        <button 
          class="control-btn test-btn" 
          (click)="startAutoTest()"
          [disabled]="isTestModeRunning">
          🧪 {{ isTestModeRunning ? '测试进行中...' : '开始自动测试' }}
        </button>
        <button 
          class="control-btn stop-test-btn" 
          (click)="stopAutoTest()"
          *ngIf="isTestModeRunning">
          ❌ 停止测试
        </button>
      </div>

      <!-- 测试进度显示 -->
      <div class="test-progress" *ngIf="isTestModeRunning">
        <div class="progress-info">
          <span>🔄 大循环: {{ currentBigCycle }}/{{ totalBigCycles }}</span>
          <span>📊 小循环: {{ currentSubCycle }}/{{ totalSubCycles }}</span>
        </div>
        <div class="progress-stats">
          <span>✅ 成功: {{ testStats.successfulOperations }}</span>
          <span>❌ 失败: {{ testStats.failedOperations }}</span>
          <span>📈 成功率: {{ getSuccessRate() }}%</span>
        </div>
      </div>
      
      <!-- 录制时间显示 -->
      <div class="record-timer" *ngIf="isStartRecordVideo">
        {{ showTime }}
      </div>
    </div>
    
  </div>
</div>
