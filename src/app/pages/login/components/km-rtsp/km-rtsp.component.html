<div class="main-wrap">
  <!-- é€æ˜çš„è§†é¢‘å®¹å™¨ï¼Œnative viewä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ -->
  <div class="camera-wrap" id="rtsp-wrap">
    
    <!-- ğŸ¯ è§†é¢‘çŠ¶æ€æŒ‡ç¤ºå™¨ -->
    <div class="video-status-indicator">
      <div>ğŸ“º RTSPè§†é¢‘åŒºåŸŸ</div>
      <div class="status-subtitle">Native View æ¸²æŸ“</div>
    </div>
    
    <!-- ğŸ® æ‚¬æµ®æ§åˆ¶æŒ‰é’®åŒºåŸŸ -->
    <div class="overlay-controls">
      <!-- ä¸»è¦æ§åˆ¶æŒ‰é’® -->
      <div class="control-row main-controls">
        <button class="control-btn start-btn" (click)="startPull()">
          â–¶ï¸ å¼€å§‹æ‹‰æµ
        </button>
        <button class="control-btn stop-btn" (click)="stopPull()">
          â¹ï¸ åœæ­¢æ‹‰æµ
        </button>
      </div>
      
      <!-- å½•åˆ¶æ§åˆ¶æŒ‰é’® -->
      <div class="control-row record-controls">
        <button class="control-btn photo-btn" (click)="takeSnapshot()">
          ğŸ“· æ‹ç…§
        </button>
        <button 
          class="control-btn record-btn" 
          (click)="startSaveMp4()"
          *ngIf="!isStartRecordVideo">
          ğŸ¬ å¼€å§‹å½•åˆ¶
        </button>
        <button 
          class="control-btn stop-record-btn" 
          (click)="stopRecordMp4()"
          *ngIf="isStartRecordVideo">
          â¹ï¸ åœæ­¢å½•åˆ¶
        </button>
      </div>

      <!-- è‡ªåŠ¨æµ‹è¯•æ§åˆ¶æŒ‰é’® -->
      <div class="control-row test-controls">
        <button 
          class="control-btn test-btn" 
          (click)="startAutoTest()"
          [disabled]="isTestModeRunning">
          ğŸ§ª {{ isTestModeRunning ? 'æµ‹è¯•è¿›è¡Œä¸­...' : 'å¼€å§‹è‡ªåŠ¨æµ‹è¯•' }}
        </button>
        <button 
          class="control-btn stop-test-btn" 
          (click)="stopAutoTest()"
          *ngIf="isTestModeRunning">
          âŒ åœæ­¢æµ‹è¯•
        </button>
      </div>

      <!-- æµ‹è¯•è¿›åº¦æ˜¾ç¤º -->
      <div class="test-progress" *ngIf="isTestModeRunning">
        <div class="progress-info">
          <span>ğŸ”„ å¤§å¾ªç¯: {{ currentBigCycle }}/{{ totalBigCycles }}</span>
          <span>ğŸ“Š å°å¾ªç¯: {{ currentSubCycle }}/{{ totalSubCycles }}</span>
        </div>
        <div class="progress-stats">
          <span>âœ… æˆåŠŸ: {{ testStats.successfulOperations }}</span>
          <span>âŒ å¤±è´¥: {{ testStats.failedOperations }}</span>
          <span>ğŸ“ˆ æˆåŠŸç‡: {{ getSuccessRate() }}%</span>
        </div>
      </div>
      
      <!-- å½•åˆ¶æ—¶é—´æ˜¾ç¤º -->
      <div class="record-timer" *ngIf="isStartRecordVideo">
        {{ showTime }}
      </div>
    </div>
    
  </div>
</div>
